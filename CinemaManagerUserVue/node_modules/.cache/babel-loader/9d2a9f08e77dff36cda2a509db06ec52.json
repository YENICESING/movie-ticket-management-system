{"remainingRequest":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js!D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\movie\\MovieOngoing.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\movie\\MovieOngoing.vue","mtime":1742740377353},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\babel.config.js","mtime":1713545016820},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1vdmllSXRlbSBmcm9tICcuLi8uLi9jb21wb25lbnRzL21vdmllL21vdmllLWl0ZW0nOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW92aWVPbmdvaW5nIiwKICBjb21wb25lbnRzOiB7CiAgICBtb3ZpZUl0ZW0KICB9LAogIHByb3BzOiB7CiAgICBtb3ZpZUNhdGVnb3J5SWQ6IE51bWJlciwKICAgIG9yZGVyQnlDb2x1bW46IFN0cmluZwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvdGFsOiAwLAogICAgICBwYWdlU2l6ZTogMzAsCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHN0YXJ0RGF0ZTogbW9tZW50KCkuc3VidHJhY3QoMzY1LCAiZGF5cyIpLmZvcm1hdCgiWVlZWS1NTS1ERCIpLAogICAgICBlbmREYXRlOiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSwKICAgICAgbW92aWVMaXN0OiBbXSwKICAgICAgc29ycnk6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpc3RlbkNoYW5nZSgpIHsKICAgICAgY29uc3QgewogICAgICAgIG1vdmllQ2F0ZWdvcnlJZCwKICAgICAgICBvcmRlckJ5Q29sdW1uCiAgICAgIH0gPSB0aGlzOwogICAgICByZXR1cm4gewogICAgICAgIG1vdmllQ2F0ZWdvcnlJZCwKICAgICAgICBvcmRlckJ5Q29sdW1uCiAgICAgIH07CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRNb3ZpZUxpc3QoKTsKICB9LAogIHdhdGNoOiB7CiAgICBsaXN0ZW5DaGFuZ2UoKSB7CiAgICAgIHRoaXMuZ2V0TW92aWVMaXN0KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRNb3ZpZUxpc3QoKSB7CiAgICAgIGxldCBxdWVyeUluZm8gPSB7CiAgICAgICAgbW92aWVDYXRlZ29yeUlkOiB0aGlzLm1vdmllQ2F0ZWdvcnlJZCwKICAgICAgICBvcmRlckJ5Q29sdW1uOiB0aGlzLm9yZGVyQnlDb2x1bW4sCiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLAogICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5zdGFydERhdGUsCiAgICAgICAgZW5kRGF0ZTogdGhpcy5lbmREYXRlLAogICAgICAgIGlzQXNjOiAnZGVzYycKICAgICAgfTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGE6IHJlcwogICAgICB9ID0gYXdhaXQgYXhpb3MuZ2V0KCdzeXNNb3ZpZS9maW5kJywgewogICAgICAgIHBhcmFtczogcXVlcnlJbmZvCiAgICAgIH0pOwogICAgICB0aGlzLm1vdmllTGlzdCA9IHJlcy5kYXRhOwogICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICB0aGlzLnNvcnJ5ID0gdGhpcy5tb3ZpZUxpc3QubGVuZ3RoID09PSAwOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgewogICAgICB0aGlzLnBhZ2VOdW0gPSBuZXdQYWdlOwogICAgICB0aGlzLmdldE1vdmllTGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["movieItem","moment","name","components","props","movieCategoryId","Number","orderByColumn","String","data","total","pageSize","pageNum","startDate","subtract","format","endDate","movieList","sorry","computed","listenChange","created","getMovieList","watch","methods","queryInfo","isAsc","res","axios","get","params","length","handleCurrentChange","newPage"],"sources":["src/views/movie/MovieOngoing.vue"],"sourcesContent":["<!--这段代码定义了一个名为 MovieOngoing 的 Vue 组件，其主要功能是展示正在热映的电影列表，支持按电影类别筛选、排序以及分页功能\ngetMovieList：构建查询参数 queryInfo，包含电影类别 ID、排序字段、每页数量、当前页码、日期范围和排序方式，\n通过 axios 发送 GET 请求到 sysMovie/find 接口获取电影数据。将返回的数据赋值给 movieList，更新总记录数 total，\n并根据 movieList 的长度更新 sorry 变量。\nhandleCurrentChange：当用户切换页码时，更新 pageNum 的值，并调用 getMovieList 方法重新获取当前页的电影列表数据。-->\n<template>\n  <div class=\"movie-container\">\n    <!-- 电影列表 -->\n    <div v-if=\"!sorry\" class=\"movie-grid\">\n      <movie-item\n        v-for=\"item in movieList\"\n        :key=\"item.movieId\"\n        :movieItem=\"item\"\n        class=\"movie-card\"\n      />\n    </div>\n\n    <!-- 空状态提示 -->\n    <div v-else class=\"empty-state\">\n      <el-icon :size=\"60\" class=\"empty-icon\">\n        <svg viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\"/><path d=\"M512 304m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0ZM512 768c-17.7 0-32-14.3-32-32V448c0-17.7 14.3-32 32-32s32 14.3 32 32v288c0 17.7-14.3 32-32 32z\"/></svg>\n      </el-icon>\n      <h3 class=\"empty-title\">没有找到相关电影</h3>\n      <p class=\"empty-tip\">尝试调整筛选条件或查看其他分类</p>\n    </div>\n\n    <!-- 分页 -->\n    <el-pagination\n      v-if=\"total > pageSize\"\n      class=\"smart-pagination\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"pageNum\"\n      :page-size=\"pageSize\"\n      background\n      layout=\"prev, pager, next, jumper\"\n      :total=\"total\"\n      :pager-count=\"5\"\n    >\n    </el-pagination>\n  </div>\n</template>\n<script>\nimport movieItem from '../../components/movie/movie-item'\nimport moment from 'moment'\nexport default {\n  name: \"MovieOngoing\",\n  components: {\n    movieItem\n  },\n  props: {\n    movieCategoryId: Number,\n    orderByColumn: String\n  },\n  data() {\n    return {\n      total: 0,\n      pageSize: 30,\n      pageNum: 1,\n      startDate: moment().subtract(365, \"days\").format(\"YYYY-MM-DD\"),\n      endDate: moment().format('YYYY-MM-DD'),\n      movieList: [],\n      sorry: false\n    }\n  },\n  computed: {\n    listenChange() {\n      const {movieCategoryId, orderByColumn} = this\n      return {movieCategoryId, orderByColumn}\n    }\n  },\n  created() {\n    this.getMovieList()\n  },\n  watch: {\n    listenChange() {\n      this.getMovieList()\n    }\n  },\n  methods: {\n    async getMovieList(){\n      let queryInfo = {\n        movieCategoryId: this.movieCategoryId,\n        orderByColumn: this.orderByColumn,\n        pageSize: this.pageSize,\n        pageNum: this.pageNum,\n        startDate: this.startDate,\n        endDate: this.endDate,\n        isAsc: 'desc'\n      }\n      const { data : res } = await axios.get('sysMovie/find', {params: queryInfo})\n      this.movieList = res.data\n      this.total = res.total\n      this.sorry = this.movieList.length === 0;\n    },\n    handleCurrentChange(newPage) {\n      this.pageNum = newPage\n      this.getMovieList()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-list{\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.pageHelper{\n  display: flex;\n  justify-content: center;\n  margin: 40px 0px;\n}\n\n.no-cinema{\n  display: flex;\n  justify-content: center;\n  margin-top: 40px;\n  margin-bottom: 40px;\n  font-size: 16px;\n  color: #333;\n}\n</style>\n"],"mappings":"AA0CA,OAAAA,SAAA;AACA,OAAAC,MAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAH;EACA;EACAI,KAAA;IACAC,eAAA,EAAAC,MAAA;IACAC,aAAA,EAAAC;EACA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,QAAA;MACAC,OAAA;MACAC,SAAA,EAAAZ,MAAA,GAAAa,QAAA,cAAAC,MAAA;MACAC,OAAA,EAAAf,MAAA,GAAAc,MAAA;MACAE,SAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACAC,aAAA;MACA;QAAAf,eAAA;QAAAE;MAAA;MACA;QAAAF,eAAA;QAAAE;MAAA;IACA;EACA;EACAc,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,KAAA;IACAH,aAAA;MACA,KAAAE,YAAA;IACA;EACA;EACAE,OAAA;IACA,MAAAF,aAAA;MACA,IAAAG,SAAA;QACApB,eAAA,OAAAA,eAAA;QACAE,aAAA,OAAAA,aAAA;QACAI,QAAA,OAAAA,QAAA;QACAC,OAAA,OAAAA,OAAA;QACAC,SAAA,OAAAA,SAAA;QACAG,OAAA,OAAAA,OAAA;QACAU,KAAA;MACA;MACA;QAAAjB,IAAA,EAAAkB;MAAA,UAAAC,KAAA,CAAAC,GAAA;QAAAC,MAAA,EAAAL;MAAA;MACA,KAAAR,SAAA,GAAAU,GAAA,CAAAlB,IAAA;MACA,KAAAC,KAAA,GAAAiB,GAAA,CAAAjB,KAAA;MACA,KAAAQ,KAAA,QAAAD,SAAA,CAAAc,MAAA;IACA;IACAC,oBAAAC,OAAA;MACA,KAAArB,OAAA,GAAAqB,OAAA;MACA,KAAAX,YAAA;IACA;EACA;AACA","ignoreList":[]}]}