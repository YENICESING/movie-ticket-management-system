{"remainingRequest":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js!D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\Login.vue","mtime":1743398504672},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\babel.config.js","mtime":1713545016820},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g55m75b2V6KGo5Y2V5pWw5o2u5a+56LGhCiAgICAgIGxvZ2luRm9ybTogewogICAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgLy8g55m75b2V6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgIGxvZ2luRm9ybVJ1bGVzOiB7CiAgICAgICAgLy8g6aqM6K+B55So5oi35ZCN5qC85byPCiAgICAgICAgdXNlck5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI3np7AiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAyLAogICAgICAgICAgbWF4OiAyMCwKICAgICAgICAgIG1lc3NhZ2U6ICLnlKjmiLflkI3np7Dplb/luqblnKgy5YiwMjDkuKrlrZfnrKbkuYvpl7QiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgLy8g6aqM6K+B5a+G56CB5qC85byPCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiA2LAogICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgIG1lc3NhZ2U6ICLnmbvlvZXlr4bnoIHplb/luqblnKg25YiwMTbkuKrlrZfnrKbkuYvpl7QiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgc2Vzc2lvbklkOiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2Vzc2lvbklkID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInNlc3Npb25JZCIpOwogICAgY29uc29sZS5sb2coInRoaXMgc2Vzc2lvbklkIGlzIDogIiArIHRoaXMuc2Vzc2lvbklkKTsKICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzZXNzaW9uSWQiLCAwKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgdmFsaWQgPSBhd2FpdCB0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZSgpOwogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsKICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24iOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGE6IHJlcwogICAgICAgIH0gPSBhd2FpdCBheGlvcy5wb3N0KCJzeXNVc2VyL2xvZ2luIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5sb2dpbkZvcm0pKTsKICAgICAgICBpZiAocmVzLmNvZGUgIT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgIG1lc3NhZ2U6ICLnmbvlvZXmiJDlip8iLAogICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgLy8g5L+d5a2YdG9rZW4KICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgcmVzLmRhdGEuc3lzVXNlci5zeXNSb2xlID0gbnVsbDsKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibG9naW5Vc2VyIiwgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuc3lzVXNlcikpOwogICAgICAgIGlmICh0aGlzLnNlc3Npb25JZCAhPT0gMCAmJiB0aGlzLnNlc3Npb25JZCAhPT0gIjAiICYmIHRoaXMuc2Vzc2lvbklkICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2Nob29zZVNlYXQvIiArIHRoaXMuc2Vzc2lvbklkKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8g5a+86Iiq6Lez6L2s5Yiw6aaW6aG1CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi93ZWxjb21lIik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIGxldCBlcnJvck1zZyA9ICJOZXR3b3JrIEVycm9yIjsKICAgICAgICBpZiAoZS5yZXNwb25zZSAmJiBlLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIGVycm9yTXNnID0gdHlwZW9mIGUucmVzcG9uc2UuZGF0YSA9PT0gJ3N0cmluZycgPyBlLnJlc3BvbnNlLmRhdGEgOiBlLnJlc3BvbnNlLmRhdGEubXNnIHx8ICfor7fmsYLplJnor68nOwogICAgICAgIH0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTXNnLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGR1cmF0aW9uOiA1MDAwCiAgICAgICAgfSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlckFjY291bnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcmVnaXN0ZXIiKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["name","data","loading","loginForm","userName","password","loginFormRules","required","message","trigger","min","max","sessionId","created","window","sessionStorage","getItem","console","log","setItem","methods","login","valid","$refs","loginFormRef","validate","axios","defaults","headers","post","res","JSON","stringify","code","$message","error","msg","success","duration","token","sysUser","sysRole","$router","push","e","errorMsg","response","showClose","type","registerAccount"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <div class=\"title_box\">\n        <div class=\"logo\">\n          <i class=\"iconfont icon-r-team\"></i>\n        </div>\n        <h1>影院用户端登录</h1>\n      </div>\n      <!-- 登录表单区域 -->\n      <el-form\n        class=\"login_form\"\n        :model=\"loginForm\"\n        :rules=\"loginFormRules\"\n        ref=\"loginFormRef\"\n      >\n        <!-- 用户名 -->\n        <el-form-item prop=\"userName\">\n          <el-input\n            v-model=\"loginForm.userName\"\n            placeholder=\"请输入用户名\"\n            prefix-icon=\"iconfont icon-r-user1\"\n            clearable\n          ></el-input>\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <el-input\n            v-model=\"loginForm.password\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            prefix-icon=\"iconfont icon-r-lock\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <!-- 按扭区域 -->\n        <el-form-item class=\"btns\">\n          <el-button\n            type=\"primary\"\n            @click=\"login\"\n            :loading=\"loading\"\n          >\n            登 录\n          </el-button>\n          <el-button\n            type=\"info\"\n            @click=\"registerAccount\"\n          >\n            注册新用户\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loading: false,\n      // 登录表单数据对象\n      loginForm: {\n        userName: \"\",\n        password: \"\",\n      },\n      // 登录表单验证规则\n      loginFormRules: {\n        // 验证用户名格式\n        userName: [\n          {\n            required: true,\n            message: \"请输入用户名称\",\n            trigger: \"blur\",\n          },\n          {\n            min: 2,\n            max: 20,\n            message: \"用户名称长度在2到20个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n        // 验证密码格式\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 16,\n            message: \"登录密码长度在6到16个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      sessionId: 0,\n    };\n  },\n  created() {\n    this.sessionId = window.sessionStorage.getItem(\"sessionId\");\n    console.log(\"this sessionId is : \" + this.sessionId);\n    window.sessionStorage.setItem(\"sessionId\", 0);\n  },\n  methods: {\n    async login() {\n      try {\n        this.loading = true;\n        const valid = await this.$refs.loginFormRef.validate();\n        if (!valid) return;\n\n        axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\n        const { data: res } = await axios.post(\n          \"sysUser/login\",\n          JSON.stringify(this.loginForm)\n        );\n\n        if (res.code !== 200) {\n          this.$message.error(res.msg);\n          return;\n        }\n\n        this.$message.success({ message: \"登录成功\", duration: 1000 });\n        console.log(res.data);\n        // 保存token\n        window.sessionStorage.setItem(\"token\", res.data.token);\n        res.data.sysUser.sysRole = null;\n        window.sessionStorage.setItem(\n          \"loginUser\",\n          JSON.stringify(res.data.sysUser)\n        );\n\n        if (\n          this.sessionId !== 0 &&\n          this.sessionId !== \"0\" &&\n          this.sessionId !== null\n        ) {\n          this.$router.push(\"/chooseSeat/\" + this.sessionId);\n          return;\n        }\n        // 导航跳转到首页\n        this.$router.push(\"/welcome\");\n      } catch (e) {\n        console.error(e);\n        let errorMsg = \"Network Error\";\n        if (e.response && e.response.data) {\n          errorMsg = typeof e.response.data === 'string'\n            ? e.response.data\n            : (e.response.data.msg || '请求错误');\n        }\n        this.$message({\n          showClose: true,\n          message: errorMsg,\n          type: \"error\",\n          duration: 5000,\n        });\n      } finally {\n        this.loading = false;\n      }\n    },\n    registerAccount() {\n      this.$router.push(\"/register\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login_container {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: url(\"../assets/login-background.jpg\");\n  background-size: cover;\n}\n\n.login_box {\n  width: 420px;\n  padding: 40px;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 8px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  transition: all 0.3s ease;\n\n  &:hover {\n    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);\n  }\n}\n\n.title_box {\n  text-align: center;\n  margin-bottom: 30px;\n\n  .logo {\n    margin: 0 auto 15px;\n    width: 60px;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 50%;\n\n    i {\n      font-size: 32px;\n      color: white;\n    }\n  }\n\n  h1 {\n    font-size: 24px;\n    color: #333;\n    margin: 0;\n    font-weight: 500;\n  }\n}\n\n.login_form {\n  .el-form-item {\n    margin-bottom: 25px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  .el-input {\n    ::v-deep .el-input__inner {\n      height: 48px;\n      line-height: 48px;\n      padding-left: 40px;\n      border-radius: 4px;\n      border: 1px solid #dcdfe6;\n      transition: border-color 0.3s;\n\n      &:focus {\n        border-color: #667eea;\n      }\n    }\n\n    ::v-deep .el-input__prefix {\n      left: 10px;\n      i {\n        font-size: 18px;\n        color: #999;\n      }\n    }\n  }\n}\n\n.btns {\n  margin-top: 30px;\n  display: flex;\n  justify-content: space-between;\n\n  .el-button {\n    width: 48%;\n    height: 48px;\n    font-size: 16px;\n    border-radius: 4px;\n    transition: all 0.3s;\n\n    &:first-child {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border: none;\n\n      &:hover {\n        opacity: 0.9;\n        transform: translateY(-2px);\n        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n      }\n    }\n\n    &:last-child {\n      background: #f0f2f5;\n      color: #666;\n      border: none;\n\n      &:hover {\n        background: #e6e8eb;\n        transform: translateY(-2px);\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n      }\n    }\n\n    &:active {\n      transform: translateY(0);\n    }\n  }\n}\n</style>\n"],"mappings":";AAyDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACA;MACAC,cAAA;QACA;QACAF,QAAA,GACA;UACAG,QAAA;UACAC,OAAA;UACAC,OAAA;QACA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA,EACA;QACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,GAAA;UACAC,GAAA;UACAH,OAAA;UACAC,OAAA;QACA;MAEA;MACAG,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAD,SAAA,GAAAE,MAAA,CAAAC,cAAA,CAAAC,OAAA;IACAC,OAAA,CAAAC,GAAA,+BAAAN,SAAA;IACAE,MAAA,CAAAC,cAAA,CAAAI,OAAA;EACA;EACAC,OAAA;IACA,MAAAC,MAAA;MACA;QACA,KAAAnB,OAAA;QACA,MAAAoB,KAAA,cAAAC,KAAA,CAAAC,YAAA,CAAAC,QAAA;QACA,KAAAH,KAAA;QAEAI,KAAA,CAAAC,QAAA,CAAAC,OAAA,CAAAC,IAAA;QACA;UAAA5B,IAAA,EAAA6B;QAAA,UAAAJ,KAAA,CAAAG,IAAA,CACA,iBACAE,IAAA,CAAAC,SAAA,MAAA7B,SAAA,CACA;QAEA,IAAA2B,GAAA,CAAAG,IAAA;UACA,KAAAC,QAAA,CAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;UACA;QACA;QAEA,KAAAF,QAAA,CAAAG,OAAA;UAAA7B,OAAA;UAAA8B,QAAA;QAAA;QACArB,OAAA,CAAAC,GAAA,CAAAY,GAAA,CAAA7B,IAAA;QACA;QACAa,MAAA,CAAAC,cAAA,CAAAI,OAAA,UAAAW,GAAA,CAAA7B,IAAA,CAAAsC,KAAA;QACAT,GAAA,CAAA7B,IAAA,CAAAuC,OAAA,CAAAC,OAAA;QACA3B,MAAA,CAAAC,cAAA,CAAAI,OAAA,CACA,aACAY,IAAA,CAAAC,SAAA,CAAAF,GAAA,CAAA7B,IAAA,CAAAuC,OAAA,CACA;QAEA,IACA,KAAA5B,SAAA,UACA,KAAAA,SAAA,YACA,KAAAA,SAAA,WACA;UACA,KAAA8B,OAAA,CAAAC,IAAA,uBAAA/B,SAAA;UACA;QACA;QACA;QACA,KAAA8B,OAAA,CAAAC,IAAA;MACA,SAAAC,CAAA;QACA3B,OAAA,CAAAkB,KAAA,CAAAS,CAAA;QACA,IAAAC,QAAA;QACA,IAAAD,CAAA,CAAAE,QAAA,IAAAF,CAAA,CAAAE,QAAA,CAAA7C,IAAA;UACA4C,QAAA,UAAAD,CAAA,CAAAE,QAAA,CAAA7C,IAAA,gBACA2C,CAAA,CAAAE,QAAA,CAAA7C,IAAA,GACA2C,CAAA,CAAAE,QAAA,CAAA7C,IAAA,CAAAmC,GAAA;QACA;QACA,KAAAF,QAAA;UACAa,SAAA;UACAvC,OAAA,EAAAqC,QAAA;UACAG,IAAA;UACAV,QAAA;QACA;MACA;QACA,KAAApC,OAAA;MACA;IACA;IACA+C,gBAAA;MACA,KAAAP,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]}]}