{"remainingRequest":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\Welcome.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\src\\views\\Welcome.vue","mtime":1744869142710},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerUserVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiV2VsY29tZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVG9rZW46ICIiLAogICAgICBjaW5lbWFJbmZvOiAiIiwKICAgICAgdXJsOiAiIiwKICAgICAgYWN0aXZlVXJsOiB0aGlzLiRyb3V0ZS5wYXRoLnN1YnN0cmluZygKICAgICAgICAwLAogICAgICAgIHRoaXMuJHJvdXRlLnBhdGguaW5kZXhPZigiLyIsIDEpID09PSAtMQogICAgICAgICAgPyB0aGlzLiRyb3V0ZS5wYXRoLmxlbmd0aAogICAgICAgICAgOiB0aGlzLiRyb3V0ZS5wYXRoLmluZGV4T2YoIi8iLCAxKQogICAgICApLAogICAgICBtZW51TGlzdDogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgbmFtZTogIummlumhtSIsCiAgICAgICAgICBwYXRoOiAiL2hvbWUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDIsCiAgICAgICAgICBuYW1lOiAi5b2x54mHIiwKICAgICAgICAgIHBhdGg6ICIvbW92aWUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDMsCiAgICAgICAgICBuYW1lOiAi5qac5Y2VIiwKICAgICAgICAgIHBhdGg6ICIvcmFua2luZ0xpc3QiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDQsCiAgICAgICAgICBuYW1lOiAi5L+h5oGvIiwKICAgICAgICAgIHBhdGg6ICIvYWJvdXRVcyIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgLy/mkJzntKLlhbPplK7lrZcKICAgICAga3c6ICIiLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENpbmVtYUluZm8oKTsKICAgIHRoaXMuaXNUb2tlbiA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoCiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dpblVzZXIiKQogICAgKTsKICAgIGlmIChyZXMgPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IHVzZXJQaWN0dXJlID0gcmVzLnVzZXJQaWN0dXJlOwogICAgY29uc3QgcGljdHVyZSA9IEpTT04ucGFyc2UodXNlclBpY3R1cmUpOwogICAgaWYgKHBpY3R1cmUgPT09IG51bGwgfHwgcGljdHVyZS5sZW5ndGggPT09IDApIHJldHVybjsKICAgIHRoaXMudXJsID0gdGhpcy5nbG9iYWwuYmFzZSArIHBpY3R1cmVbMF07CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlKCkgewogICAgICB0aGlzLmFjdGl2ZVVybCA9IHRoaXMuJHJvdXRlLnBhdGguc3Vic3RyaW5nKAogICAgICAgIDAsCiAgICAgICAgdGhpcy4kcm91dGUucGF0aC5pbmRleE9mKCIvIiwgMSkgPT09IC0xCiAgICAgICAgICA/IHRoaXMuJHJvdXRlLnBhdGgubGVuZ3RoCiAgICAgICAgICA6IHRoaXMuJHJvdXRlLnBhdGguaW5kZXhPZigiLyIsIDEpCiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0Q2luZW1hSW5mbygpIHsKICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOwogICAgICBhd2FpdCBheGlvcwogICAgICAgIC5nZXQoInN5c0NpbmVtYSIpCiAgICAgICAgLnRoZW4oKHJlc3ApID0+IHsKICAgICAgICAgIGlmIChyZXNwID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpcy5jaW5lbWFJbmZvID0gcmVzcC5kYXRhLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgaWYgKAogICAgICAgICAgICBlLnJlc3BvbnNlID09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICBlLnJlc3BvbnNlLmRhdGEgPT0gdW5kZWZpbmVkCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogZS5yZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdChrZXksIGtleVBhdGgpIHsKICAgICAgY29uc29sZS5sb2coa2V5LCBrZXlQYXRoKTsKICAgIH0sCiAgICBzZWFyY2goKSB7CiAgICAgIGxldCB0bXAgPSB0aGlzLmt3OwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3NlYXJjaC9zZWFyY2hNb3ZpZT9rdz0iICsgdG1wKTsKICAgICAgdGhpcy5rdyA9ICIiOwogICAgfSwKICAgIGhhbmRsZUNvbW1hbmQoY29tbWFuZCkgewogICAgICBpZiAoY29tbWFuZCA9PT0gImxvZ291dCIpIHsKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICByZXR1cm4gdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICB9CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIiArIGNvbW1hbmQpOwogICAgfSwKICAgIHRvV2VsY29tZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi93ZWxjb21lIik7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Welcome.vue"],"names":[],"mappings":";AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Welcome.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <el-container>\n    <el-header>\n      <div class=\"header-inner\">\n        <a href=\"/welcome\" style=\"text-decoration: none\">\n          <div class=\"logo-text\">\n            <img\n              style=\"height: 30px; margin-bottom: -5px\"\n              src=\"../assets/homeLogo.jpg\"\n            />\n            影院网\n          </div>\n        </a>\n        <el-menu\n          :default-active=\"activeUrl\"\n          class=\"nav-menu\"\n          mode=\"horizontal\"\n          :router=\"true\"\n          active-text-color=\"red\"\n          text-color=\"#000000\"\n        >\n          <el-menu-item\n            :index=\"item.path\"\n            v-for=\"item in menuList\"\n            :key=\"item.id\"\n            :style=\"{ color: 'white' }\"\n            :class=\"{ 'active-menu-item': activeUrl === item.path }\"\n          >{{ item.name }}</el-menu-item>\n        </el-menu>\n        <div class=\"searchContainer\">\n          <el-input\n            v-model=\"kw\"\n            class=\"searchBar\"\n            placeholder=\"搜索电影\"\n          ></el-input>\n          <el-button\n            id=\"searchBtn\"\n            type=\"danger\"\n            circle\n            @click=\"search\"\n          >\n            <i class=\"iconfont icon-r-find\" style=\"font-size: 18px;\"></i>\n          </el-button>\n        </div>\n        <el-dropdown @command=\"handleCommand\">\n                    <span class=\"el-dropdown-link\">\n                        <el-avatar :src=\"url == '' ? require('@/assets/avatar.jpg') : url\" :size=\"50\">{{\n                            url === \"\" || url === null ? \"user\" : \"\"\n                          }}</el-avatar>\n                        <i\n                          class=\"el-icon-arrow-down el-icon--right icon-arrow\"\n                        ></i>\n                    </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item command=\"userMenu\" v-if=\"isToken\"\n            >个人中心</el-dropdown-item>\n            <el-dropdown-item command=\"logout\" v-if=\"isToken\"\n            >退出</el-dropdown-item>\n            <el-dropdown-item command=\"login\" v-if=\"!isToken\"\n            >登录</el-dropdown-item>\n            <el-dropdown-item command=\"register\" v-if=\"!isToken\"\n            >注册账号</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n    </el-header>\n    <el-main>\n      <router-view></router-view>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nexport default {\n  name: \"Welcome\",\n  data() {\n    return {\n      isToken: \"\",\n      cinemaInfo: \"\",\n      url: \"\",\n      activeUrl: this.$route.path.substring(\n        0,\n        this.$route.path.indexOf(\"/\", 1) === -1\n          ? this.$route.path.length\n          : this.$route.path.indexOf(\"/\", 1)\n      ),\n      menuList: [\n        {\n          id: 1,\n          name: \"首页\",\n          path: \"/home\",\n        },\n        {\n          id: 2,\n          name: \"影片\",\n          path: \"/movie\",\n        },\n        {\n          id: 3,\n          name: \"榜单\",\n          path: \"/rankingList\",\n        },\n        {\n          id: 4,\n          name: \"信息\",\n          path: \"/aboutUs\",\n        },\n      ],\n      //搜索关键字\n      kw: \"\",\n    };\n  },\n  created() {\n    this.getCinemaInfo();\n    this.isToken = window.sessionStorage.getItem(\"token\");\n    var res = JSON.parse(\n      window.sessionStorage.getItem(\"loginUser\")\n    );\n    if (res == undefined) {\n      return;\n    }\n    const userPicture = res.userPicture;\n    const picture = JSON.parse(userPicture);\n    if (picture === null || picture.length === 0) return;\n    this.url = this.global.base + picture[0];\n  },\n  watch: {\n    $route() {\n      this.activeUrl = this.$route.path.substring(\n        0,\n        this.$route.path.indexOf(\"/\", 1) === -1\n          ? this.$route.path.length\n          : this.$route.path.indexOf(\"/\", 1)\n      );\n    },\n  },\n  methods: {\n    async getCinemaInfo() {\n      const _this = this;\n      await axios\n        .get(\"sysCinema\")\n        .then((resp) => {\n          if (resp == undefined) {\n            return;\n          }\n          _this.cinemaInfo = resp.data.data;\n        })\n        .catch((e) => {\n          console.log(e);\n          if (\n            e.response == undefined ||\n            e.response.data == undefined\n          ) {\n            this.$message({\n              showClose: true,\n              message: e,\n              type: \"error\",\n              duration: 5000,\n            });\n          } else {\n            this.$message({\n              showClose: true,\n              message: e.response.data,\n              type: \"error\",\n              duration: 5000,\n            });\n          }\n        });\n    },\n    handleSelect(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    search() {\n      let tmp = this.kw;\n      this.$router.push(\"/search/searchMovie?kw=\" + tmp);\n      this.kw = \"\";\n    },\n    handleCommand(command) {\n      if (command === \"logout\") {\n        window.sessionStorage.clear();\n        return this.$router.push(\"/login\");\n      }\n      this.$router.push(\"/\" + command);\n    },\n    toWelcome() {\n      this.$router.push(\"/welcome\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.active-menu-item {\n  background-color: #1f2935 !important;\n}\n.el-header {\n  height: 80px !important;\n  border-bottom: 1px solid #1f2935;\n  background-color:#1f2935;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.header-inner {\n  width: 90%;\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.logo-text {\n  color: white;\n  font-size: 26px;\n}\n\n.nav-menu {\n  border-bottom: 0px solid #1f2935 !important;\n  height: 60px;\n  margin: 9px auto;\n}\n.el-menu{\n  margin-right: 160px;\n}\n.el-menu-item {\n  font-size: 20px;\n  background-color: #1f2935;\n}\n\n.el-menu-item:hover {\n  color: red !important;\n  background-color: #1f2935 !important;\n\n}\n\n.searchContainer {\n  padding: 20px 0;\n  display: flex;\n  align-items: center;\n}\n\n.searchBar >>> input {\n  border-radius: 50px;\n  border: 1px solid #ccc;\n  padding: 0 15px;\n}\n\n#searchBtn {\n  transform: translate(-100%, 0);\n}\n\n.el-dropdown-link {\n  width: 70px;\n  margin: 15px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.icon-arrow {\n  transition: all 0.2s ease-in-out;\n  -webkit-transition: all 0.2s ease-in-out;\n  -moz-transition: all 0.2s ease-in-out;\n  -o-transition: all 0.2s ease-in-out;\n}\n\n.el-dropdown-link:hover .icon-arrow {\n  /* 定义动画的状态 */\n  -webkit-transform: rotate(180deg) scale(1);\n  -moz-transform: rotate(180deg) scale(1);\n  -o-transform: rotate(180deg) scale(1);\n  -transform: rotate(180deg) scale(1);\n}\n\n.footer-mini {\n  border-top: 1px solid #eee;\n  padding-top: 20px;\n  text-align: center;\n}\n\n.footer {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.el-main {\n  padding: 0px;\n}\n</style>\n"]}]}