{"remainingRequest":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\whisper\\cinema\\CinemaManagerAdminVue\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&lang=scss&scoped=true","dependencies":[{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\src\\views\\Login.vue","mtime":1743398278869},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sb2dpbl9jb250YWluZXIgewogIGhlaWdodDogMTAwdmg7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGJhY2tncm91bmQ6IHVybCgiLi4vYXNzZXRzL2xvZ2luLWJhY2tncm91bmQuanBnIik7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKfQoKLmxvZ2luX2JveCB7CiAgd2lkdGg6IDQyMHB4OwogIHBhZGRpbmc6IDQwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjk1KTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjE1KTsKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwoKICAmOmhvdmVyIHsKICAgIGJveC1zaGFkb3c6IDAgMTVweCAzNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICB9Cn0KCi50aXRsZV9ib3ggewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tYm90dG9tOiAzMHB4OwoKICAubG9nbyB7CiAgICBtYXJnaW46IDAgYXV0byAxNXB4OwogICAgd2lkdGg6IDYwcHg7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKCiAgICBpIHsKICAgICAgZm9udC1zaXplOiAzMnB4OwogICAgICBjb2xvcjogd2hpdGU7CiAgICB9CiAgfQoKICBoMSB7CiAgICBmb250LXNpemU6IDI0cHg7CiAgICBjb2xvcjogIzMzMzsKICAgIG1hcmdpbjogMDsKICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgfQp9CgoubG9naW5fZm9ybSB7CiAgLmVsLWZvcm0taXRlbSB7CiAgICBtYXJnaW4tYm90dG9tOiAyNXB4OwoKICAgICY6bGFzdC1jaGlsZCB7CiAgICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICB9CiAgfQoKICAuZWwtaW5wdXQgewogICAgOjp2LWRlZXAgLmVsLWlucHV0X19pbm5lciB7CiAgICAgIGhlaWdodDogNDhweDsKICAgICAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgICAgIHBhZGRpbmctbGVmdDogNDBweDsKICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGNkZmU2OwogICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zczsKCiAgICAgICY6Zm9jdXMgewogICAgICAgIGJvcmRlci1jb2xvcjogIzY2N2VlYTsKICAgICAgfQogICAgfQoKICAgIDo6di1kZWVwIC5lbC1pbnB1dF9fcHJlZml4IHsKICAgICAgbGVmdDogMTBweDsKICAgICAgaSB7CiAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgIGNvbG9yOiAjOTk5OwogICAgICB9CiAgICB9CiAgfQp9CgouYnRucyB7CiAgbWFyZ2luLXRvcDogMzBweDsKCiAgLmVsLWJ1dHRvbiB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogNDhweDsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7CiAgICBib3JkZXI6IG5vbmU7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKCiAgICAmOmhvdmVyIHsKICAgICAgb3BhY2l0eTogMC45OwogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjQpOwogICAgfQoKICAgICY6YWN0aXZlIHsKICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <div class=\"title_box\">\n        <div class=\"logo\">\n          <i class=\"iconfont icon-r-setting\"></i>\n        </div>\n        <h1>影院后台管理系统</h1>\n      </div>\n      <!-- 登录表单区域 -->\n      <el-form\n        class=\"login_form\"\n        :model=\"loginForm\"\n        :rules=\"loginFormRules\"\n        ref=\"loginFormRef\"\n      >\n        <!-- 用户名 -->\n        <el-form-item prop=\"userName\">\n          <el-input\n            v-model=\"loginForm.userName\"\n            placeholder=\"请输入用户名\"\n            prefix-icon=\"el-icon-user\"\n            clearable\n          >\n          </el-input>\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <el-input\n            v-model=\"loginForm.password\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            prefix-icon=\"el-icon-lock\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <!-- 按扭区域 -->\n        <el-form-item class=\"btns\">\n          <el-button\n            type=\"primary\"\n            @click=\"login\"\n            :loading=\"loading\"\n          >\n            登 录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      loading: false,\n      //登录表单数据对象\n      loginForm: {\n        userName: \"\",\n        password: \"\",\n      },\n      //表单验证规则\n      loginFormRules: {\n        //验证用户名\n        userName: [\n          {\n            required: true,\n            message: \"请输入用户名称\",\n            trigger: \"blur\",\n          },\n          {\n            min: 2,\n            max: 20,\n            message: \"长度在2到20个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n        //验证密码\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 16,\n            message: \"长度在6到16个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    success(params) {\n      this.login();\n    },\n    async login() {\n      try {\n        this.loading = true;\n        const valid = await this.$refs.loginFormRef.validate();\n        if (!valid) return;\n\n        axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\n        const resData = await axios.post(\n          \"sysUser/login\",\n          JSON.stringify(this.loginForm)\n        );\n\n        const { data: res } = resData;\n        if (res.code !== 200) {\n          this.$message.error(res.msg);\n          return;\n        }\n\n        //控制登录权限\n        if (\n          res.data.sysUser.sysRole.children === null ||\n          res.data.sysUser.sysRole.children[0] === null\n        ) {\n          this.$message.error(\n            \"抱歉，您没有权限登录，请联系管理员获取权限\"\n          );\n          return;\n        }\n\n        this.$message.success(\"登录成功\");\n        //保存token\n        window.sessionStorage.setItem(\"token\", res.data.token);\n        window.sessionStorage.setItem(\n          \"loginUser\",\n          JSON.stringify({\n            sysUser: res.data.sysUser,\n            cinemaId: res.data.cinemaId,\n            cinemaName: res.data.cinemaName,\n          })\n        );\n        window.sessionStorage.setItem(\n          \"btnPermission\",\n          res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"admin\"\n        );\n\n        //导航跳转到首页\n        await this.$router.push(\"/welcome\");\n      } catch (e) {\n        console.error(e);\n        let errorMsg = \"Network Error\";\n        if (e.response && e.response.data) {\n          errorMsg = typeof e.response.data === 'string'\n            ? e.response.data\n            : (e.response.data.msg || '请求错误');\n        }\n        this.$message({\n          showClose: true,\n          message: errorMsg,\n          type: \"error\",\n          duration: 5000,\n        });\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login_container {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: url(\"../assets/login-background.jpg\");\n  background-size: cover;\n}\n\n.login_box {\n  width: 420px;\n  padding: 40px;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 8px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  transition: all 0.3s ease;\n\n  &:hover {\n    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);\n  }\n}\n\n.title_box {\n  text-align: center;\n  margin-bottom: 30px;\n\n  .logo {\n    margin: 0 auto 15px;\n    width: 60px;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 50%;\n\n    i {\n      font-size: 32px;\n      color: white;\n    }\n  }\n\n  h1 {\n    font-size: 24px;\n    color: #333;\n    margin: 0;\n    font-weight: 500;\n  }\n}\n\n.login_form {\n  .el-form-item {\n    margin-bottom: 25px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  .el-input {\n    ::v-deep .el-input__inner {\n      height: 48px;\n      line-height: 48px;\n      padding-left: 40px;\n      border-radius: 4px;\n      border: 1px solid #dcdfe6;\n      transition: border-color 0.3s;\n\n      &:focus {\n        border-color: #667eea;\n      }\n    }\n\n    ::v-deep .el-input__prefix {\n      left: 10px;\n      i {\n        font-size: 18px;\n        color: #999;\n      }\n    }\n  }\n}\n\n.btns {\n  margin-top: 30px;\n\n  .el-button {\n    width: 100%;\n    height: 48px;\n    font-size: 16px;\n    border-radius: 4px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border: none;\n    transition: all 0.3s;\n\n    &:hover {\n      opacity: 0.9;\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n    }\n\n    &:active {\n      transform: translateY(0);\n    }\n  }\n}\n</style>\n"]}]}