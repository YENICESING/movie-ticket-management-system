{"remainingRequest":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\whisper\\cinema\\CinemaManagerAdminVue\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&scoped=true&lang=css","dependencies":[{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\src\\views\\Login.vue","mtime":1743397898897},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\whisper\\cinema\\CinemaManagerAdminVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5sb2dpbl9jb250YWluZXIgewogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiB1cmwoIi4uL2Fzc2V0cy9sb2dpbi1iYWNrZ3JvdW5kLmpwZyIpOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KCi5sb2dpbl9ib3ggewogIG9wYWNpdHk6IDE7CiAgd2lkdGg6IDQ1MHB4OwogIGhlaWdodDogMzAwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDUwJTsKICB0b3A6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICBib3JkZXI6IDFweCBzb2xpZCBncmV5Owp9CgoudGl0bGVfYm94IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAyMDAlOwogIHBhZGRpbmc6IDIwcHggMDsKfQoKLmxvZ2luX2Zvcm0gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDA7CiAgd2lkdGg6IDEwMCU7CiAgcGFkZGluZzogMCAyMHB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCi5idG5zIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIG1hcmdpbi10b3A6IDIwcHg7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAsMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <div class=\"title_box\">\n        <p>\n          <i class=\"iconfont icon-r-setting\" style=\"font-size: 36px\">\n          </i>\n          影院后台管理\n        </p>\n      </div>\n      <!-- 登录表单区域 -->\n      <el-form\n        class=\"login_form\"\n        :model=\"loginForm\"\n        :rules=\"loginFormRules\"\n        ref=\"loginFormRef\"\n      >\n        <!-- 用户名 -->\n        <el-form-item prop=\"userName\">\n          <el-col :span=\"2\">\n            <i\n              class=\"el-icon-user\"\n              style=\"font-size: 28px; color: grey\"\n            ></i>\n          </el-col>\n          <el-col :span=\"22\">\n            <el-input\n              v-model=\"loginForm.userName\"\n              placeholder=\"请输入用户名\"\n              clearable\n            ></el-input>\n          </el-col>\n        </el-form-item>\n        <!-- 密码 -->\n        <el-form-item prop=\"password\">\n          <el-col :span=\"2\">\n            <i\n              class=\"el-icon-lock\"\n              style=\"font-size: 28px; color: grey\"\n            ></i>\n          </el-col>\n          <el-col :span=\"22\">\n            <el-input\n              v-model=\"loginForm.password\"\n              type=\"password\"\n              placeholder=\"请输入密码\"\n              show-password\n            ></el-input>\n          </el-col>\n        </el-form-item>\n        <!-- 按钮区域 -->\n        <el-form-item class=\"btns\">\n          <el-button\n            type=\"primary\"\n            @click=\"login\"\n            style=\"\n                            width: 100%;\n                            height: 50px;\n                            font-size: 18px;\n                            letter-spacing: 2px;\n                            background: linear-gradient(to right, #409EFF, #67C23A);\n                            border: none;\n                            border-radius: 4px;\n                            box-shadow: 0 2px 10px rgba(64, 158, 255, 0.3);\n                            transition: all 0.3s;\n                        \"\n            @mouseover.native=\"hoverLoginBtn\"\n            @mouseleave.native=\"leaveLoginBtn\"\n          >\n            登 录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      // 登录表单数据对象\n      loginForm: {\n        userName: \"\",\n        password: \"\",\n      },\n      // 表单验证规则\n      loginFormRules: {\n        // 验证用户名\n        userName: [\n          {\n            required: true,\n            message: \"请输入用户名称\",\n            trigger: \"blur\",\n          },\n          {\n            min: 2,\n            max: 20,\n            message: \"长度在2到20个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n        // 验证密码\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 16,\n            message: \"长度在6到16个字符之间\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    hoverLoginBtn(e) {\n      e.target.style.background = 'linear-gradient(to right, #67C23A, #409EFF)';\n      e.target.style.boxShadow = '0 2px 15px rgba(64, 158, 255, 0.5)';\n    },\n    leaveLoginBtn(e) {\n      e.target.style.background = 'linear-gradient(to right, #409EFF, #67C23A)';\n      e.target.style.boxShadow = '0 2px 10px rgba(64, 158, 255, 0.3)';\n    },\n    login() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (!valid) return;\n        axios.defaults.headers.post[\"Content-Type\"] =\n          \"application/json\";\n        const resData = await axios\n          .post(\"sysUser/login\", JSON.stringify(this.loginForm))\n          .catch((e) => {\n            console.log(e);\n            if (\n              e.response == undefined ||\n              e.response.data == undefined\n            ) {\n              this.$message({\n                showClose: true,\n                message: e,\n                type: \"error\",\n                duration: 5000,\n              });\n            } else {\n              this.$message({\n                showClose: true,\n                message: e.response.data,\n                type: \"error\",\n                duration: 5000,\n              });\n            }\n          });\n        if (resData == undefined) {\n          this.$message({\n            showClose: true,\n            message: \"Network Error\",\n            type: \"error\",\n            duration: 5000,\n          });\n          return;\n        }\n        const { data: res } = resData;\n        if (res.code !== 200) return this.$message.error(res.msg);\n        // 控制登录权限\n        if (\n          res.data.sysUser.sysRole.children === null ||\n          res.data.sysUser.sysRole.children[0] === null\n        ) {\n          this.$message.error(\n            \"抱歉，您没有权限登录，请联系管理员获取权限\"\n          );\n          return;\n        }\n        this.$message.success(\"登录成功\");\n        // 保存token\n        window.sessionStorage.setItem(\"token\", res.data.token);\n        window.sessionStorage.setItem(\n          \"loginUser\",\n          JSON.stringify({\n            sysUser: res.data.sysUser,\n            cinemaId: res.data.cinemaId,\n            cinemaName: res.data.cinemaName,\n          })\n        );\n        window.sessionStorage.setItem(\n          \"btnPermission\",\n          res.data.sysUser.sysRole.roleId === 1 ? \"admin\" : \"admin\"\n        );\n        // 导航跳转到首页\n        await this.$router.push(\"/welcome\");\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login_container {\n  height: 100%;\n  background: url(\"../assets/login-background.jpg\");\n  background-size: cover;\n}\n\n.login_box {\n  opacity: 1;\n  width: 450px;\n  height: 300px;\n  background-color: #fff;\n  border-radius: 3px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid grey;\n}\n\n.title_box {\n  text-align: center;\n  font-size: 200%;\n  padding: 20px 0;\n}\n\n.login_form {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding: 0 20px;\n  box-sizing: border-box;\n}\n\n.btns {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n</style>\n"]}]}